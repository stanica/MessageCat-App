{"version":3,"sources":["auth/local/index.js"],"names":["router","express","Router","post","req","res","next","passport","authenticate","err","user","info","error","status","json","message","token","_id","role"],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,SAASC,kBAAQC,MAAR,EAAb;;AAEAF,OAAOG,IAAP,CAAY,GAAZ,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtCC,uBAASC,YAAT,CAAsB,OAAtB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0B;AACrD,YAAIC,QAAQH,OAAOE,IAAnB;AACA,YAAGC,KAAH,EAAU;AACN,mBAAOP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB,CAAP;AACH;AACD,YAAG,CAACF,IAAJ,EAAU;AACN,mBAAOL,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,SAAS,yCAAV,EAArB,CAAP;AACH;;AAED,YAAIC,QAAQ,qBAAUN,KAAKO,GAAf,EAAoBP,KAAKQ,IAAzB,CAAZ;AACAb,YAAIS,IAAJ,CAAS,EAAEE,KAAF,EAAT;AACH,KAXD,EAWGZ,GAXH,EAWQC,GAXR,EAWaC,IAXb;AAYH,CAbD;;kBAeeN,M","file":"index.js","sourcesContent":["'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {signToken} from '../auth.service';\n\nvar router = express.Router();\n\nrouter.post('/', function(req, res, next) {\n    passport.authenticate('local', function(err, user, info) {\n        var error = err || info;\n        if(error) {\n            return res.status(401).json(error);\n        }\n        if(!user) {\n            return res.status(404).json({message: 'Something went wrong, please try again.'});\n        }\n\n        var token = signToken(user._id, user.role);\n        res.json({ token });\n    })(req, res, next);\n});\n\nexport default router;\n"]}